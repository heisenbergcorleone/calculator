<!DOCTYPE html>
<html>
    <head></head>
    <body>
      <div>
       <output id="display">Calculator 1.0</output> 
      </div>
      <br>
      <div> 
      <input type="text" id="nums">
      </div>
    <br>
      <div>
        <output id="history"> History:<br> </output>
      </div>

    <script>

var elInput= document.getElementById("nums");

var check = 0;
var mechArray = [0,"+",""];
var numberArray = ["1","2","3","4","5","6","7","8","9","0"];
var symbolArray = ["+","-","/","*"];
var result;
var alpha = ["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];
var fxValue = 0;
var elOutput = document.getElementById("display");
var elHistory = document.getElementById("history");


elInput.addEventListener("keyup", function(e){
  //  decX = mechArray[0].length -1 -mechArray[0].indexOf(".")
  
/*
  if((mechArray[0].indexOf(".") != "-1") && (mechArray[2].indexOf(".") != "-1" )) {

    var decX = mechArray[0].length -1 - mechArray[0].indexOf(".");
    var decY = mechArray[1].length -1 - mechArray[1].indexOf(".");
    console.log(decX , decY);
  }
*/

  var lastValue = elInput.value.charAt(elInput.value.length - 1);
  
  alpha.some(function(e){
    if(lastValue === e) {

      alert("Enter digits!")
      elInput.value = elInput.value.slice(0, -1);
    }
  })

  
  

  numberArray.some(function(no){
    if(e.key === no){

      //console.log(e.keyCode);
      mechArray[2] = elInput.value; 
      elHistory.value += e.key;
      check = 0;
    }
    
  });

  if(e.keyCode === 8) {
    elHistory.value = elHistory.value.slice(0, -1);
    if(elInput.value == "") {
      mechArray[2] = "";
      check = 1;
    } else {
      mechArray[2] = elInput.value;
    }
  };


  symbolArray.some(function(symb) {

    if(e.key === symb) {
      
      if(mechArray[2] == "") {
        mechArray[1] = e.key;
        elInput.value = "";
        elHistory.value += e.key;

        if(check == 1) {
        elHistory.value = elHistory.value.slice(0, elHistory.value.length - 2) + elHistory.value.slice(elHistory.value.length-1);
        }
        
      }

      if (mechArray[2] != ""){
         run(e);
      }
      
      check = 1;
    };
  });


  if(e.keyCode === 13) {
    if (mechArray[2] == "") {
      mechArray[1] = "=";
      elInput.value = "";
      elHistory.value += "=";

      if(check == 1) {
        elHistory.value = elHistory.value.slice(0, elHistory.value.length - 2) + elHistory.value.slice(elHistory.value.length-1);
      }

    } else if (mechArray[2] != ""){
      run(e,"=");
    }
    check = 1;
  };
  
  result != undefined ? elOutput.value = result : elOutput.value;
  console.log(mechArray)

})


function run (e,arg) {
  cal();
  console.log(result);
  mechArray[0] = result;
  if(arg == "=") {
    mechArray[1] = "=";//e.key
    mechArray[2] = "";
    elInput.value = "";
    elHistory.value += "=";

  } else if (arg == undefined) {
    mechArray[1] = e.key;//e.key
    mechArray[2] = "";
    elInput.value = "";
    elHistory.value += e.key;
  }
  
};




function cal() {

    if(mechArray[1] === "+") {
      result = parseFloat(mechArray[0])+parseFloat(mechArray[2]);
    }
  	else if (mechArray[1] === "-") {
      result = parseFloat(mechArray[0])-parseFloat(mechArray[2]);
    }
  	else if (mechArray[1] === "/") {
      result = parseFloat(mechArray[0])/parseFloat(mechArray[2]);
    }
  	else if (mechArray[1] === "*") {
      result = parseFloat(mechArray[0])*parseFloat(mechArray[2]);
    }

};




</script>    
    </body>
</html>